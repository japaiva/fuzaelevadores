{% extends 'vendedor/base_vendedor.html' %}
{% load formato_br %}
{% load pedido_filters %}

{% block title %}Pedido {{ pedido.numero }}{% endblock %}

{% block content %}
<div class="container">
  <div class="card shadow">
    <!-- Header -->
    <div class="card-header bg-light d-flex justify-content-between align-items-center">
      <h5 class="card-title mb-0">
        <i class="fas fa-clipboard-check me-2"></i>Pedido {{ pedido.numero }} - {{ pedido.nome_projeto }}
      </h5>
      <div>
        <a href="{% url 'vendedor:pedido_list' %}" class="btn btn-outline-secondary">
          <i class="fas fa-arrow-left me-1"></i> Voltar
        </a>
      </div>
    </div>
    
    <div class="card-header bg-white">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <small class="text-muted">{{ pedido.get_modelo_elevador_display }} - {{ pedido.capacidade }} kg</small>
        </div>
        <div class="text-end">
          <small class="text-muted">Criado em: {{ pedido.criado_em|date:"d/m/Y H:i" }}</small>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="pedidoTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="resumo-tab" data-bs-toggle="tab" data-bs-target="#resumo" type="button">
          Resumo
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="especificacoes-tab" data-bs-toggle="tab" data-bs-target="#especificacoes" type="button">
          Especificações
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="dimensionamento-tab" data-bs-toggle="tab" data-bs-target="#dimensionamento" type="button">
          Ficha Técnica
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="custos-tab" data-bs-toggle="tab" data-bs-target="#custos" type="button">
          Custo Produção
        </button>
      </li>
    </ul>

    <div class="tab-content" id="pedidoTabContent">

      <!-- TAB RESUMO -->
      <div class="tab-pane fade show active" id="resumo" role="tabpanel">
        <div class="card-body">
          
          <!-- Dados da Proposta -->
          <div class="card shadow-sm border-primary mb-4">
            <div class="card-header bg-primary text-white">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="card-title mb-0">Dados da Proposta</h6>
                <span class="badge bg-light text-primary fs-6">{{ pedido.numero }}</span>
              </div>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label text-muted small">Cliente</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.cliente.nome }}</strong></div>
                    {% if pedido.cliente.nome_fantasia %}
                      <small class="text-muted">{{ pedido.cliente.nome_fantasia }}</small>
                    {% endif %}
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Vendedor</label>
                    <div class="form-control-plaintext">{{ pedido.vendedor.get_full_name|default:pedido.vendedor.username }}</div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Nome do Projeto</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.nome_projeto }}</strong></div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Faturado por</label>
                    <div class="form-control-plaintext">{{ pedido.get_faturado_por_display }}</div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label text-muted small">Data de Criação</label>
                    <div class="form-control-plaintext">{{ pedido.criado_em|date:"d/m/Y H:i" }}</div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Modelo do Elevador</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.get_modelo_elevador_display }}</strong></div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Capacidade</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.capacidade }} kg</strong></div>
                  </div>
                  {% if pedido.observacoes %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Observações</label>
                    <div class="form-control-plaintext">{{ pedido.observacoes }}</div>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>

          <!-- Valores e Comercial -->
          <div class="card shadow-sm border-success mb-4">
            <div class="card-header bg-success text-white">
              <h6 class="card-title mb-0">Valores e Comercial</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label text-muted small">Valor Base (Calculado)</label>
                    <div class="form-control-plaintext text-info">
                      <strong>R$ {{ pedido.preco_venda_calculado|formato_br|default:"0,00" }}</strong>
                    </div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Valor Final da Proposta</label>
                    <div class="form-control-plaintext text-success">
                      <strong>R$ {{ pedido.valor_proposta|formato_br|default:"0,00" }}</strong>
                    </div>
                    {% if pedido.percentual_desconto > 0 %}
                      <small class="text-muted">
                        <i class="fas fa-tag me-1"></i>
                        Desconto: {{ pedido.percentual_desconto|floatformat:1 }}%
                      </small>
                    {% endif %}
                  </div>
                  {% if pedido.prazo_entrega_dias %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Prazo de Entrega</label>
                    <div class="form-control-plaintext">{{ pedido.prazo_entrega_dias }} dias</div>
                  </div>
                  {% endif %}
                </div>
                
                <div class="col-md-6">
                  {% if pedido.data_validade %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Validade da Proposta</label>
                    <div class="form-control-plaintext">
                      {{ pedido.data_validade|date:"d/m/Y" }}
                      {% if pedido.esta_vencida %}
                        <small class="text-danger">(Vencida)</small>
                      {% elif pedido.dias_para_vencer <= 7 %}
                        <small class="text-warning">({{ pedido.dias_para_vencer }} dias)</small>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  
                  {% if pedido.forma_pagamento %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Forma de Pagamento</label>
                    <div class="form-control-plaintext">
                      <strong>{{ pedido.get_forma_pagamento_display_detalhado }}</strong>
                    </div>
                  </div>
                  {% endif %}
                  
                  {% if pedido.valor_entrada %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Valor da Entrada</label>
                    <div class="form-control-plaintext">R$ {{ pedido.valor_entrada|formato_br }}</div>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>

          <!-- Parcelamento (se houver) -->
          {% if pedido.numero_parcelas and pedido.numero_parcelas > 1 %}
          <div class="card shadow-sm border-warning mb-4">
            <div class="card-header bg-warning text-dark">
              <h6 class="card-title mb-0">Parcelamento</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-3">
                  <label class="form-label text-muted small">Número de Parcelas</label>
                  <div class="form-control-plaintext"><strong>{{ pedido.numero_parcelas }}x</strong></div>
                </div>
                {% if pedido.valor_parcela %}
                <div class="col-md-3">
                  <label class="form-label text-muted small">Valor da Parcela</label>
                  <div class="form-control-plaintext">R$ {{ pedido.valor_parcela|formato_br }}</div>
                </div>
                {% endif %}
                {% if pedido.tipo_parcela %}
                <div class="col-md-3">
                  <label class="form-label text-muted small">Tipo de Parcela</label>
                  <div class="form-control-plaintext">{{ pedido.get_tipo_parcela_display }}</div>
                </div>
                {% endif %}
                {% if pedido.primeira_parcela %}
                <div class="col-md-3">
                  <label class="form-label text-muted small">1ª Parcela</label>
                  <div class="form-control-plaintext">{{ pedido.primeira_parcela|date:"d/m/Y" }}</div>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
          {% endif %}

          <!-- Resumo de Custos -->
          {% if pedido.custo_producao or pedido.custo_materiais %}
          <div class="card shadow-sm border-info mb-4">
            <div class="card-header bg-info text-white">
              <h6 class="card-title mb-0">Resumo de Custos (Interno)</h6>
            </div>
            <div class="card-body">
              <div class="row g-3 text-center">
                {% if pedido.custo_materiais %}
                <div class="col-md-3">
                  <div class="border rounded p-3 bg-light">
                    <strong class="d-block text-primary fs-5">R$ {{ pedido.custo_materiais|formato_br }}</strong>
                    <small class="text-muted">Materiais</small>
                  </div>
                </div>
                {% endif %}
                
                {% if pedido.custo_mao_obra %}
                <div class="col-md-3">
                  <div class="border rounded p-3 bg-light">
                    <strong class="d-block text-info fs-5">R$ {{ pedido.custo_mao_obra|formato_br }}</strong>
                    <small class="text-muted">Mão de Obra</small>
                  </div>
                </div>
                {% endif %}
                
                {% if pedido.custo_instalacao %}
                <div class="col-md-3">
                  <div class="border rounded p-3 bg-light">
                    <strong class="d-block text-dark fs-5">R$ {{ pedido.custo_instalacao|formato_br }}</strong>
                    <small class="text-muted">Instalação</small>
                  </div>
                </div>
                {% endif %}
                
                {% if pedido.custo_producao %}
                <div class="col-md-3">
                  <div class="border rounded p-3 bg-primary text-white">
                    <strong class="d-block fs-5">R$ {{ pedido.custo_producao|formato_br }}</strong>
                    <small>TOTAL</small>
                  </div>
                </div>
                {% endif %}
              </div>
            </div>
          </div>
          {% endif %}
          
        </div>
      </div>

      <!-- TAB ESPECIFICAÇÕES -->
      <div class="tab-pane fade" id="especificacoes" role="tabpanel">
        <div class="card-body">
          
          <!-- Cliente e Elevador -->
          <div class="card shadow-sm border-primary mb-4">
            <div class="card-header bg-primary text-white">
              <h6 class="card-title mb-0">Cliente e Elevador</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label text-muted small">Cliente</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.cliente.nome }}</strong></div>
                    {% if pedido.cliente.nome_fantasia %}
                      <small class="text-muted">{{ pedido.cliente.nome_fantasia }}</small>
                    {% endif %}
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Faturado por</label>
                    <div class="form-control-plaintext">{{ pedido.get_faturado_por_display }}</div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Nome do Projeto</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.nome_projeto }}</strong></div>
                  </div>
                  {% if pedido.observacoes %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Observações</label>
                    <div class="form-control-plaintext">{{ pedido.observacoes }}</div>
                  </div>
                  {% endif %}
                </div>
                
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label text-muted small">Modelo do Elevador</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.get_modelo_elevador_display }}</strong></div>
                  </div>
                  {% if pedido.capacidade_pessoas %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Capacidade (Pessoas)</label>
                    <div class="form-control-plaintext">{{ pedido.capacidade_pessoas }} pessoas</div>
                  </div>
                  {% endif %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Capacidade (kg)</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.capacidade }} kg</strong></div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label text-muted small">Acionamento</label>
                    <div class="form-control-plaintext">{{ pedido.get_acionamento_display }}</div>
                  </div>
                  {% if pedido.tracao %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Tração</label>
                    <div class="form-control-plaintext">{{ pedido.get_tracao_display }}</div>
                  </div>
                  {% endif %}
                  {% if pedido.contrapeso %}
                  <div class="mb-3">
                    <label class="form-label text-muted small">Contrapeso</label>
                    <div class="form-control-plaintext">{{ pedido.get_contrapeso_display }}</div>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>

          <!-- Dimensões do Poço -->
          <div class="card shadow-sm border-info mb-4">
            <div class="card-header bg-info text-white">
              <h6 class="card-title mb-0">Dimensões do Poço</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-3">
                  <label class="form-label text-muted small">Largura</label>
                  <div class="form-control-plaintext"><strong>{{ pedido.largura_poco }} m</strong></div>
                </div>
                <div class="col-md-3">
                  <label class="form-label text-muted small">Comprimento</label>
                  <div class="form-control-plaintext"><strong>{{ pedido.comprimento_poco }} m</strong></div>
                </div>
                <div class="col-md-3">
                  <label class="form-label text-muted small">Altura</label>
                  <div class="form-control-plaintext"><strong>{{ pedido.altura_poco }} m</strong></div>
                </div>
                <div class="col-md-3">
                  <label class="form-label text-muted small">Pavimentos</label>
                  <div class="form-control-plaintext"><strong>{{ pedido.pavimentos }}</strong></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Cabine -->
          <div class="card shadow-sm border-success mb-4">
            <div class="card-header bg-success text-white">
              <h6 class="card-title mb-0">Cabine</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-md-3">
                  <label class="form-label text-muted small">Material</label>
                  <div class="form-control-plaintext">{{ pedido.get_material_cabine_display }}</div>
                  {% if pedido.material_cabine == 'Outro' and pedido.material_cabine_outro %}
                    <small class="text-muted">{{ pedido.material_cabine_outro }} - R$ {{ pedido.valor_cabine_outro|formato_br }}</small>
                  {% endif %}
                </div>
                <div class="col-md-3">
                  <label class="form-label text-muted small">Espessura</label>
                  <div class="form-control-plaintext">{{ pedido.get_espessura_cabine_display }}</div>
                </div>
                <div class="col-md-3">
                  <label class="form-label text-muted small">Saída</label>
                  <div class="form-control-plaintext">{{ pedido.get_saida_cabine_display }}</div>
                </div>
                <div class="col-md-3">
                  <label class="form-label text-muted small">Altura</label>
                  <div class="form-control-plaintext"><strong>{{ pedido.altura_cabine }} m</strong></div>
                </div>
                <div class="col-md-6">
                  <label class="form-label text-muted small">Piso da Cabine</label>
                  <div class="form-control-plaintext">{{ pedido.get_piso_cabine_display }}</div>
                  {% if pedido.piso_cabine == 'Por conta da empresa' and pedido.material_piso_cabine %}
                    <small class="text-muted">
                      Material: {{ pedido.get_material_piso_cabine_display }}
                      {% if pedido.material_piso_cabine == 'Outro' and pedido.material_piso_cabine_outro %}
                        - {{ pedido.material_piso_cabine_outro }} - R$ {{ pedido.valor_piso_cabine_outro|formato_br }}
                      {% endif %}
                    </small>
                  {% endif %}
                </div>
              </div>

              {% if pedido.largura_cabine_calculada and pedido.comprimento_cabine_calculado %}
              <hr class="my-3">
              <div class="row text-center">
                <div class="col-md-4">
                  <div class="border rounded p-3 bg-light">
                    <strong class="d-block text-dark fs-5">{{ pedido.largura_cabine_calculada|formato_br }} m</strong>
                    <small class="text-muted">Largura da Cabine</small>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="border rounded p-3 bg-light">
                    <strong class="d-block text-dark fs-5">{{ pedido.comprimento_cabine_calculado|formato_br }} m</strong>
                    <small class="text-muted">Comprimento da Cabine</small>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="border rounded p-3 bg-light">
                    <strong class="d-block text-dark fs-5">{{ pedido.altura_cabine|formato_br }} m</strong>
                    <small class="text-muted">Altura da Cabine</small>
                  </div>
                </div>
              </div>
              {% endif %}
            </div>
          </div>

          <!-- Portas -->
          <div class="card shadow-sm border-warning mb-4">
            <div class="card-header bg-warning text-dark">
              <h6 class="card-title mb-0">Portas</h6>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <!-- Porta da Cabine -->
                <div class="col-md-6">
                  <h6 class="text-muted mb-3">Porta da Cabine</h6>
                  <div class="mb-2">
                    <label class="form-label text-muted small">Modelo</label>
                    <div class="form-control-plaintext">{{ pedido.get_modelo_porta_cabine_display }}</div>
                  </div>
                  <div class="mb-2">
                    <label class="form-label text-muted small">Material</label>
                    <div class="form-control-plaintext">{{ pedido.get_material_porta_cabine_display }}</div>
                    {% if pedido.material_porta_cabine == 'Outro' and pedido.material_porta_cabine_outro %}
                      <small class="text-muted">{{ pedido.material_porta_cabine_outro }} - R$ {{ pedido.valor_porta_cabine_outro|formato_br }}</small>
                    {% endif %}
                  </div>
                  {% if pedido.folhas_porta_cabine %}
                  <div class="mb-2">
                    <label class="form-label text-muted small">Folhas</label>
                    <div class="form-control-plaintext">{{ pedido.get_folhas_porta_cabine_display }}</div>
                  </div>
                  {% endif %}
                  <div class="mb-2">
                    <label class="form-label text-muted small">Dimensões</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.largura_porta_cabine }} x {{ pedido.altura_porta_cabine }} m</strong></div>
                  </div>
                </div>
                
                <!-- Porta do Pavimento -->
                <div class="col-md-6">
                  <h6 class="text-muted mb-3">Porta do Pavimento</h6>
                  <div class="mb-2">
                    <label class="form-label text-muted small">Modelo</label>
                    <div class="form-control-plaintext">{{ pedido.get_modelo_porta_pavimento_display }}</div>
                  </div>
                  <div class="mb-2">
                    <label class="form-label text-muted small">Material</label>
                    <div class="form-control-plaintext">{{ pedido.get_material_porta_pavimento_display }}</div>
                    {% if pedido.material_porta_pavimento == 'Outro' and pedido.material_porta_pavimento_outro %}
                      <small class="text-muted">{{ pedido.material_porta_pavimento_outro }} - R$ {{ pedido.valor_porta_pavimento_outro|formato_br }}</small>
                    {% endif %}
                  </div>
                  {% if pedido.folhas_porta_pavimento %}
                  <div class="mb-2">
                    <label class="form-label text-muted small">Folhas</label>
                    <div class="form-control-plaintext">{{ pedido.get_folhas_porta_pavimento_display }}</div>
                  </div>
                  {% endif %}
                  <div class="mb-2">
                    <label class="form-label text-muted small">Dimensões</label>
                    <div class="form-control-plaintext"><strong>{{ pedido.largura_porta_pavimento }} x {{ pedido.altura_porta_pavimento }} m</strong></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
      
      <!-- TAB FICHA TÉCNICA -->
      <div class="tab-pane fade" id="dimensionamento" role="tabpanel">
        <div class="card-body">
          {% if dimensionamento or pedido.dimensionamento_detalhado or pedido.ficha_tecnica %}
            
            {% if dimensionamento.cab or pedido.largura_cabine_calculada %}
            <div class="card shadow-sm border-dark mb-4">
              <div class="card-header bg-dark text-white">
                <h6 class="card-title mb-0">
                  Ficha Técnica
                </h6>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <h6 class="text-dark border-bottom pb-2">Dimensões da Cabine</h6>
                    <div class="row g-3">
                      <div class="col-6">
                        <label class="form-label text-muted small">Largura</label>
                        <div class="form-control-plaintext fw-bold">
                          {% if dimensionamento.cab.largura %}
                            {{ dimensionamento.cab.largura|formato_br }} m
                          {% else %}
                            {{ pedido.largura_cabine_calculada|formato_br|default:"0,00" }} m
                          {% endif %}
                        </div>
                      </div>
                      <div class="col-6">
                        <label class="form-label text-muted small">Comprimento</label>
                        <div class="form-control-plaintext fw-bold">
                          {% if dimensionamento.cab.compr %}
                            {{ dimensionamento.cab.compr|formato_br }} m
                          {% else %}
                            {{ pedido.comprimento_cabine_calculado|formato_br|default:"0,00" }} m
                          {% endif %}
                        </div>
                      </div>
                      <div class="col-6">
                        <label class="form-label text-muted small">Altura</label>
                        <div class="form-control-plaintext fw-bold">
                          {% if dimensionamento.cab.altura %}
                            {{ dimensionamento.cab.altura|formato_br }} m
                          {% else %}
                            {{ pedido.altura_cabine|formato_br|default:"0,00" }} m
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <h6 class="text-dark border-bottom pb-2">Capacidades</h6>
                    <div class="row g-3">
                      <div class="col-12">
                        <label class="form-label text-muted small">Capacidade de Carga</label>
                        <div class="form-control-plaintext fw-bold text-success fs-5">
                          {% if dimensionamento.cab.capacidade %}
                            {{ dimensionamento.cab.capacidade|formato_br }} kg
                          {% else %}
                            {{ pedido.capacidade_cabine_calculada|formato_br|default:pedido.capacidade|formato_br }} kg
                          {% endif %}
                        </div>
                      </div>
                      <div class="col-12">
                        <label class="form-label text-muted small">Tração Necessária</label>
                        <div class="form-control-plaintext fw-bold text-primary fs-5">
                          {% if dimensionamento.cab.tracao %}
                            {{ dimensionamento.cab.tracao|formato_br }} kg
                          {% else %}
                            {{ pedido.tracao_cabine_calculada|formato_br|default:"0" }} kg
                          {% endif %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endif %}

            <div class="row">
              {% if dimensionamento.cab.chp %}
              <div class="col-md-6">
                <div class="card shadow-sm border-info mb-4">
                  <div class="card-header bg-info text-white">
                    <h6 class="card-title mb-0">
                      Chapas Metálicas
                    </h6>
                  </div>
                  <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <span class="text-muted">Chapas do Corpo</span>
                      <span class="fw-bold">{{ dimensionamento.cab.chp.corpo|default:"0" }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <span class="text-muted">Chapas do Piso</span>
                      <span class="fw-bold">{{ dimensionamento.cab.chp.piso|default:"0" }}</span>
                    </div>
                    <hr class="my-2">
                    <div class="d-flex justify-content-between align-items-center">
                      <span class="text-muted fw-bold">Total de Chapas</span>
                      {% if dimensionamento.cab.chp.corpo and dimensionamento.cab.chp.piso %}
                        <span class="fw-bold text-info fs-5">{{ dimensionamento.cab.chp.corpo|add:dimensionamento.cab.chp.piso }}</span>
                      {% else %}
                        <span class="fw-bold text-info fs-5">0</span>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}

              {% if dimensionamento.cab.pnl %}
              <div class="col-md-6">
                <div class="card shadow-sm border-secondary mb-4">
                  <div class="card-header bg-secondary text-white">
                    <h6 class="card-title mb-0">
                      Painéis
                    </h6>
                  </div>
                  <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <span class="text-muted">Painéis Laterais</span>
                      <span class="fw-bold">{{ dimensionamento.cab.pnl.lateral|default:"0" }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <span class="text-muted">Painéis do Fundo</span>
                      <span class="fw-bold">{{ dimensionamento.cab.pnl.fundo|default:"0" }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <span class="text-muted">Painéis do Teto</span>
                      <span class="fw-bold">{{ dimensionamento.cab.pnl.teto|default:"0" }}</span>
                    </div>
                    <hr class="my-2">
                    <div class="d-flex justify-content-between align-items-center">
                      <span class="text-muted fw-bold">Total de Painéis</span>
                      {% if dimensionamento.cab.pnl.lateral and dimensionamento.cab.pnl.fundo and dimensionamento.cab.pnl.teto %}
                        <span class="fw-bold text-secondary fs-5">
                          {{ dimensionamento.cab.pnl.lateral|add:dimensionamento.cab.pnl.fundo|add:dimensionamento.cab.pnl.teto }}
                        </span>
                      {% else %}
                        <span class="fw-bold text-secondary fs-5">0</span>
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
            </div>

            {% if explicacao or pedido.explicacao_calculo %}
            <div class="card shadow-sm border-dark mb-4">
              <div class="card-header bg-dark text-white">
                <h6 class="card-title mb-0">
                  Explicação dos Cálculos
                </h6>
              </div>
              <div class="card-body">
                <div class="bg-light p-3 rounded">
                  <pre class="mb-0" style="white-space: pre-wrap; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 0.9rem; line-height: 1.4;">
                    {% if explicacao %}{{ explicacao|safe }}{% else %}{{ pedido.explicacao_calculo|safe }}{% endif %}
                  </pre>
                </div>
              </div>
            </div>
            {% endif %}

          {% else %}
            <div class="text-center p-5">
              <i class="fas fa-ruler fa-3x text-muted mb-3"></i>
              <h5 class="text-muted">Ficha Técnica Indisponível</h5>
              <p class="text-muted">Execute os cálculos para gerar a ficha técnica detalhada dos componentes.</p>
              {% if pedido.pode_calcular %}
                <a href="{% url 'vendedor:pedido_calcular' pedido.pk %}" class="btn btn-primary">
                  <i class="fas fa-calculator"></i> Executar Cálculos
                </a>
              {% endif %}
            </div>
          {% endif %}
        </div>
      </div>

      <!-- TAB CUSTOS -->
      <div class="tab-pane fade" id="custos" role="tabpanel">
        <div class="card-body">
          {% if pedido.custo_producao or pedido.custo_materiais or pedido.custo_mao_obra or pedido.custo_instalacao or pedido.componentes_calculados %}
            
            <div class="card shadow-sm border-success mb-4">
              <div class="card-header bg-success text-white">
                <h6 class="card-title mb-0">
                  Resumo dos Custos de Produção
                </h6>
              </div>
              <div class="card-body">
                <div class="row text-center">
                  {% if pedido.custo_materiais %}
                  <div class="col-md-3">
                    <div class="border rounded p-3 bg-light">
                      <strong class="d-block text-primary fs-4">R$ {{ pedido.custo_materiais|formato_br }}</strong>
                      <small class="text-muted">Materiais</small>
                    </div>
                  </div>
                  {% endif %}
                  
                  {% if pedido.custo_mao_obra %}
                  <div class="col-md-3">
                    <div class="border rounded p-3 bg-light">
                      <strong class="d-block text-info fs-4">R$ {{ pedido.custo_mao_obra|formato_br }}</strong>
                      <small class="text-muted">Mão de Obra (15%)</small>
                    </div>
                  </div>
                  {% endif %}
                  
                  {% if pedido.custo_instalacao %}
                  <div class="col-md-3">
                    <div class="border rounded p-3 bg-light">
                      <strong class="d-block text-dark fs-4">R$ {{ pedido.custo_instalacao|formato_br }}</strong>
                      <small class="text-muted">Instalação (10%)</small>
                    </div>
                  </div>
                  {% endif %}
                  
                  {% if pedido.custo_producao %}
                  <div class="col-md-3">
                    <div class="border rounded p-3 bg-success text-white">
                      <strong class="d-block fs-4">R$ {{ pedido.custo_producao|formato_br }}</strong>
                      <small>TOTAL</small>
                    </div>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>

            {% if pedido.componentes_calculados %}
            <div class="accordion" id="custosAccordion">
              
              {% if pedido.componentes_calculados.CABINE %}
              <div class="accordion-item border-dark">
                <h2 class="accordion-header" id="cabineHeader">
                  <button class="accordion-button collapsed bg-dark text-white" type="button" 
                          data-bs-toggle="collapse" data-bs-target="#cabineCollapse">
                    <div class="d-flex justify-content-between w-100 me-3">
                      <span><strong>CABINE</strong> </span>
                      <span class="badge bg-secondary fs-6">R$ {{ pedido.componentes_calculados.CABINE.total_categoria|formato_br }}</span>
                    </div>
                  </button>
                </h2>
                <div id="cabineCollapse" class="accordion-collapse collapse" data-bs-parent="#custosAccordion">
                  <div class="accordion-body">
                    
                    {% for subcategoria_nome, subcategoria_dados in pedido.componentes_calculados.CABINE.items %}
                    {% if subcategoria_nome != 'total_categoria' and subcategoria_dados.itens %}
                    
                    <div class="card border-dark mb-3">
                      <div class="card-header bg-light">
                        <div class="d-flex justify-content-between align-items-center">
                          <h6 class="mb-0 text-dark">
                            {% if 'chapas' in subcategoria_nome %}Chapas{% elif 'piso' in subcategoria_nome %}Piso{% elif 'fixacao' in subcategoria_nome %}Fixação{% else %}{{ subcategoria_nome|title }}{% endif %}
                          </h6>
                          <span class="badge bg-dark text-white">R$ {{ subcategoria_dados.total_subcategoria|formato_br }}</span>
                        </div>
                      </div>
                      <div class="card-body">
                        
                        {% for codigo, comp in subcategoria_dados.itens.items %}
                        <div class="row border-bottom pb-2 mb-2">
                          <div class="col-md-8">
                            <div class="d-flex align-items-start">
                              <div class="me-3">
                                <span class="badge bg-secondary">{{ comp.codigo }}</span>
                              </div>
                              <div class="flex-grow-1">
                                <h6 class="mb-1">{{ comp.descricao|default:comp.codigo }}</h6>
                                <small class="text-muted">{{ comp.categoria }} › {{ comp.subcategoria }}</small>
                                
                                {% if comp.explicacao %}
                                <div class="mt-2 p-2 bg-light rounded">
                                  <small class="text-primary">
                                    <i class="fas fa-info-circle me-1"></i>
                                    {{ comp.explicacao }}
                                  </small>
                                </div>
                                {% endif %}
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4 text-end">
                            <div class="mb-1">
                              <strong class="text-success fs-5">R$ {{ comp.valor_total|formato_br }}</strong>
                            </div>
                            <div class="text-muted small">
                              {{ comp.quantidade|formato_br }} {{ comp.unidade|default:"un" }} × R$ {{ comp.valor_unitario|formato_br }}
                            </div>
                            <div class="progress mt-1" style="height: 4px;">
                              <div class="progress-bar bg-dark" style="width: {{ comp.valor_total|div:pedido.componentes_calculados.CABINE.total_categoria|mul:100 }}%"></div>
                            </div>
                            <small class="text-muted">{{ comp.valor_total|div:pedido.componentes_calculados.CABINE.total_categoria|mul:100|floatformat:1 }}% da cabine</small>
                          </div>
                        </div>
                        {% endfor %}
                        
                      </div>
                    </div>
                    
                    {% endif %}
                    {% endfor %}
                    
                  </div>
                </div>
              </div>
              {% endif %}

              {% if pedido.componentes_calculados.CARRINHO %}
              <div class="accordion-item border-info">
                <h2 class="accordion-header" id="carrinhoHeader">
                  <button class="accordion-button collapsed bg-info text-white" type="button" 
                          data-bs-toggle="collapse" data-bs-target="#carrinhoCollapse">
                    <div class="d-flex justify-content-between w-100 me-3">
                      <span><strong>CARRINHO</strong></span>
                      <span class="badge bg-secondary fs-6">R$ {{ pedido.componentes_calculados.CARRINHO.total_categoria|formato_br }}</span>
                    </div>
                  </button>
                </h2>
                <div id="carrinhoCollapse" class="accordion-collapse collapse" data-bs-parent="#custosAccordion">
                  <div class="accordion-body">
                    
                    {% for subcategoria_nome, subcategoria_dados in pedido.componentes_calculados.CARRINHO.items %}
                    {% if subcategoria_nome != 'total_categoria' and subcategoria_dados.itens %}
                    
                    <div class="card border-info mb-3">
                      <div class="card-header bg-light">
                        <div class="d-flex justify-content-between align-items-center">
                          <h6 class="mb-0 text-info">
                            {% if 'chassi' in subcategoria_nome %}Chassi{% elif 'plataforma' in subcategoria_nome %}Plataforma{% elif 'barra' in subcategoria_nome %}Barra Roscada{% else %}{{ subcategoria_nome|title }}{% endif %}
                          </h6>
                          <span class="badge bg-info">R$ {{ subcategoria_dados.total_subcategoria|formato_br }}</span>
                        </div>
                      </div>
                      <div class="card-body">
                        
                        {% for codigo, comp in subcategoria_dados.itens.items %}
                        <div class="row border-bottom pb-2 mb-2">
                          <div class="col-md-8">
                            <div class="d-flex align-items-start">
                              <div class="me-3">
                                <span class="badge bg-secondary">{{ comp.codigo }}</span>
                              </div>
                              <div class="flex-grow-1">
                                <h6 class="mb-1">{{ comp.descricao|default:comp.codigo }}</h6>
                                <small class="text-muted">{{ comp.categoria }} › {{ comp.subcategoria }}</small>
                                
                                {% if comp.explicacao %}
                                <div class="mt-2 p-2 bg-light rounded">
                                  <small class="text-primary">
                                    <i class="fas fa-info-circle me-1"></i>
                                    {{ comp.explicacao }}
                                  </small>
                                </div>
                                {% endif %}
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4 text-end">
                            <div class="mb-1">
                              <strong class="text-success fs-5">R$ {{ comp.valor_total|formato_br }}</strong>
                            </div>
                            <div class="text-muted small">
                              {{ comp.quantidade|formato_br }} {{ comp.unidade|default:"un" }} × R$ {{ comp.valor_unitario|formato_br }}
                            </div>
                            <div class="progress mt-1" style="height: 4px;">
                              <div class="progress-bar bg-info" style="width: {{ comp.valor_total|div:pedido.componentes_calculados.CARRINHO.total_categoria|mul:100 }}%"></div>
                            </div>
                            <small class="text-muted">{{ comp.valor_total|div:pedido.componentes_calculados.CARRINHO.total_categoria|mul:100|floatformat:1 }}% do carrinho</small>
                          </div>
                        </div>
                        {% endfor %}
                        
                      </div>
                    </div>
                    
                    {% endif %}
                    {% endfor %}
                    
                  </div>
                </div>
              </div>
              {% endif %}

              {% if pedido.componentes_calculados.TRACAO %}
              <div class="accordion-item border-primary">
                <h2 class="accordion-header" id="tracaoHeader">
                  <button class="accordion-button collapsed bg-primary text-white" type="button" 
                          data-bs-toggle="collapse" data-bs-target="#tracaoCollapse">
                    <div class="d-flex justify-content-between w-100 me-3">
                      <span><strong>TRAÇÃO</strong></span>
                      <span class="badge bg-secondary fs-6">R$ {{ pedido.componentes_calculados.TRACAO.total_categoria|formato_br }}</span>
                    </div>
                  </button>
                </h2>
                <div id="tracaoCollapse" class="accordion-collapse collapse" data-bs-parent="#custosAccordion">
                  <div class="accordion-body">
                    
                    {% for subcategoria_nome, subcategoria_dados in pedido.componentes_calculados.TRACAO.items %}
                    {% if subcategoria_nome != 'total_categoria' and subcategoria_dados.itens %}
                    
                    <div class="card border-primary mb-3">
                      <div class="card-header bg-light">
                        <div class="d-flex justify-content-between align-items-center">
                          <h6 class="mb-0 text-primary">
                            {% if 'acionamento' in subcategoria_nome %}Acionamento{% elif 'tracionamento' in subcategoria_nome %}Tracionamento{% elif 'contrapeso' in subcategoria_nome %}Contrapeso{% elif 'guias' in subcategoria_nome %}Guias{% else %}{{ subcategoria_nome|title }}{% endif %}
                          </h6>
                          <span class="badge bg-primary">R$ {{ subcategoria_dados.total_subcategoria|formato_br }}</span>
                        </div>
                      </div>
                      <div class="card-body">
                        
                        {% for codigo, comp in subcategoria_dados.itens.items %}
                        <div class="row border-bottom pb-2 mb-2">
                          <div class="col-md-8">
                            <div class="d-flex align-items-start">
                              <div class="me-3">
                                <span class="badge bg-secondary">{{ comp.codigo }}</span>
                              </div>
                              <div class="flex-grow-1">
                                <h6 class="mb-1">{{ comp.descricao|default:comp.codigo }}</h6>
                                <small class="text-muted">{{ comp.categoria }} › {{ comp.subcategoria }}</small>
                                
                                {% if comp.explicacao %}
                                <div class="mt-2 p-2 bg-light rounded">
                                  <small class="text-primary">
                                    <i class="fas fa-info-circle me-1"></i>
                                    {{ comp.explicacao }}
                                  </small>
                                </div>
                                {% endif %}
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4 text-end">
                            <div class="mb-1">
                              <strong class="text-success fs-5">R$ {{ comp.valor_total|formato_br }}</strong>
                            </div>
                            <div class="text-muted small">
                              {{ comp.quantidade|formato_br }} {{ comp.unidade|default:"un" }} × R$ {{ comp.valor_unitario|formato_br }}
                            </div>
                            <div class="progress mt-1" style="height: 4px;">
                              <div class="progress-bar bg-primary" style="width: {{ comp.valor_total|div:pedido.componentes_calculados.TRACAO.total_categoria|mul:100 }}%"></div>
                            </div>
                            <small class="text-muted">{{ comp.valor_total|div:pedido.componentes_calculados.TRACAO.total_categoria|mul:100|floatformat:1 }}% da tração</small>
                          </div>
                        </div>
                        {% endfor %}
                        
                      </div>
                    </div>
                    
                    {% endif %}
                    {% endfor %}
                    
                  </div>
                </div>
              </div>
              {% endif %}

              {% if pedido.componentes_calculados.SIST_COMPLEMENTARES %}
              <div class="accordion-item border-secondary">
                <h2 class="accordion-header" id="sistemasHeader">
                  <button class="accordion-button collapsed bg-secondary text-white" type="button" 
                          data-bs-toggle="collapse" data-bs-target="#sistemasCollapse">
                    <div class="d-flex justify-content-between w-100 me-3">
                      <span><strong>SISTEMAS COMPLEMENTARES</strong></span>
                      <span class="badge bg-secondary fs-6">R$ {{ pedido.componentes_calculados.SIST_COMPLEMENTARES.total_categoria|formato_br }}</span>
                    </div>
                  </button>
                </h2>
                <div id="sistemasCollapse" class="accordion-collapse collapse" data-bs-parent="#custosAccordion">
                  <div class="accordion-body">
                    
                    {% for subcategoria_nome, subcategoria_dados in pedido.componentes_calculados.SIST_COMPLEMENTARES.items %}
                    {% if subcategoria_nome != 'total_categoria' and subcategoria_dados.itens %}
                    
                    <div class="card border-secondary mb-3">
                      <div class="card-header bg-light">
                        <div class="d-flex justify-content-between align-items-center">
                          <h6 class="mb-0 text-secondary">
                            {% if 'iluminacao' in subcategoria_nome %}Iluminação{% elif 'ventilacao' in subcategoria_nome %}Ventilação{% else %}{{ subcategoria_nome|title }}{% endif %}
                          </h6>
                          <span class="badge bg-secondary">R$ {{ subcategoria_dados.total_subcategoria|formato_br }}</span>
                        </div>
                      </div>
                      <div class="card-body">
                        
                        {% for codigo, comp in subcategoria_dados.itens.items %}
                        <div class="row border-bottom pb-2 mb-2">
                          <div class="col-md-8">
                            <div class="d-flex align-items-start">
                              <div class="me-3">
                                <span class="badge bg-secondary">{{ comp.codigo }}</span>
                              </div>
                              <div class="flex-grow-1">
                                <h6 class="mb-1">{{ comp.descricao|default:comp.codigo }}</h6>
                                <small class="text-muted">{{ comp.categoria }} › {{ comp.subcategoria }}</small>
                                
                                {% if comp.explicacao %}
                                <div class="mt-2 p-2 bg-light rounded">
                                  <small class="text-primary">
                                    <i class="fas fa-info-circle me-1"></i>
                                    {{ comp.explicacao }}
                                  </small>
                                </div>
                                {% endif %}
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4 text-end">
                            <div class="mb-1">
                              <strong class="text-success fs-5">R$ {{ comp.valor_total|formato_br }}</strong>
                            </div>
                            <div class="text-muted small">
                              {{ comp.quantidade|formato_br }} {{ comp.unidade|default:"un" }} × R$ {{ comp.valor_unitario|formato_br }}
                            </div>
                            <div class="progress mt-1" style="height: 4px;">
                              <div class="progress-bar bg-secondary" style="width: {{ comp.valor_total|div:pedido.componentes_calculados.SIST_COMPLEMENTARES.total_categoria|mul:100 }}%"></div>
                            </div>
                            <small class="text-muted">{{ comp.valor_total|div:pedido.componentes_calculados.SIST_COMPLEMENTARES.total_categoria|mul:100|floatformat:1 }}% dos sistemas</small>
                          </div>
                        </div>
                        {% endfor %}
                        
                      </div>
                    </div>
                    
                    {% endif %}
                    {% endfor %}
                    
                  </div>
                </div>
              </div>
              {% endif %}

            </div>
            {% endif %}

          {% else %}
            <div class="text-center p-5">
              <i class="fas fa-dollar-sign fa-3x text-muted mb-3"></i>
              <h5 class="text-muted">Custo de Produção Indisponível</h5>
              <p class="text-muted">Execute os cálculos para gerar o detalhamento completo dos custos de produção.</p>
              {% if pedido.pode_calcular %}
                <a href="{% url 'vendedor:pedido_calcular' pedido.pk %}" class="btn btn-primary">
                  <i class="fas fa-calculator"></i> Executar Cálculos
                </a>
              {% endif %}
            </div>
          {% endif %}
        </div>
      </div>

    </div>
  </div>
</div>

{% endblock %}

{% block extra_css %}
<style>
/* Cores mais sóbrias */
:root {
    --primary-color: #4A6785; /* Azul mais escuro/sóbrio */
    --secondary-color: #6c757d; /* Cinza */
    --info-color: #17a2b8; /* Azul claro */
    --success-color: #28a745; /* Verde */
    --dark-color: #343a40; /* Preto */
    --light-color: #f8f9fa; /* Branco off-white */
}

.bg-primary { background-color: var(--primary-color) !important; }
.border-primary { border-color: var(--primary-color) !important; }
.text-primary { color: var(--primary-color) !important; }

.bg-secondary { background-color: var(--secondary-color) !important; }
.border-secondary { border-color: var(--secondary-color) !important; }
.text-secondary { color: var(--secondary-color) !important; }

.bg-info { background-color: var(--info-color) !important; }
.border-info { border-color: var(--info-color) !important; }
.text-info { color: var(--info-color) !important; }

.bg-success { background-color: var(--success-color) !important; }
.border-success { border-color: var(--success-color) !important; }
.text-success { color: var(--success-color) !important; }

.bg-dark { background-color: var(--dark-color) !important; }
.border-dark { border-color: var(--dark-color) !important; }
.text-dark { color: var(--dark-color) !important; }

.bg-light { background-color: var(--light-color) !important; }
.text-light { color: var(--light-color) !important; }

/* Ajustes para botões */
.btn-primary {
    background: var(--primary-color);
    border-color: var(--primary-color);
}
.btn-primary:hover {
    background: #3a5a7a;
    border-color: #3a5a7a;
}
.btn-outline-primary {
    color: var(--primary-color);
    border-color: var(--primary-color);
}
.btn-outline-primary:hover {
    background-color: var(--primary-color);
    color: white;
}

.btn-outline-success {
    color: var(--success-color);
    border-color: var(--success-color);
}
.btn-outline-success:hover {
    background-color: var(--success-color);
    color: white;
}

.btn-outline-secondary {
    color: var(--secondary-color);
    border-color: var(--secondary-color);
}
.btn-outline-secondary:hover {
    background-color: var(--secondary-color);
    color: white;
}

.nav-tabs .nav-link {
    border-radius: 8px 8px 0 0;
    margin-right: 4px;
}

.nav-tabs .nav-link.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.btn-primary {
    background: linear-gradient(45deg, var(--primary-color), #3a5a7a);
    border: none;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background: linear-gradient(45deg, #3a5a7a, #2d4a68);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.btn-success {
    background: linear-gradient(45deg, var(--success-color), #1e7e34);
    border: none;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.3s ease;
}

.btn-success:hover {
    background: linear-gradient(45deg, #1e7e34, #155724);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.alert {
    border-radius: 8px;
    font-size: 0.9rem;
}

/* Accordion customizations */
.accordion-button {
    border-radius: 8px !important;
    font-weight: 600;
}

.accordion-button.collapsed {
    border-radius: 8px !important;
}

.accordion-button:not(.collapsed) {
    border-radius: 8px 8px 0 0 !important;
}

.accordion-body {
    border-radius: 0 0 8px 8px;
}

/* Progress bars */
.progress {
    height: 4px;
    border-radius: 2px;
}

.progress-bar {
    border-radius: 2px;
}

/* Cards dentro de accordion */
.accordion-body .card {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.accordion-body .card-header {
    border-radius: 8px 8px 0 0;
}

.accordion-body .card-body {
    border-radius: 0 0 8px 8px;
}

/* Badges */
.badge {
    font-size: 0.8rem;
    padding: 0.35em 0.65em;
}

/* Hover effects para cards */
.card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
}

/* Estilos para o tab ativo */
.tab-pane {
    min-height: 400px;
}

/* Loading states */
.btn[disabled] {
    opacity: 0.7;
    cursor: not-allowed;
}

/* Custom scrollbar para accordion */
.accordion-body {
    max-height: 500px;
    overflow-y: auto;
}

.accordion-body::-webkit-scrollbar {
    width: 6px;
}

.accordion-body::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 3px;
}

.accordion-body::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 3px;
}

.accordion-body::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Responsividade */
@media (max-width: 768px) {
    .accordion-button {
        font-size: 0.9rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
{% csrf_token %}
{% endblock %}